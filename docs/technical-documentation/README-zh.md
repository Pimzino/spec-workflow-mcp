# 技术文档

> **快速入口**: 直达所需 → [工具 API](api-reference.md) | [架构](architecture.md) | [开发者指南](developer-guide.md) | [故障排除](troubleshooting.md)

## 📋 目录

### 核心文档
- **[架构概览](architecture.md)** - 系统设计、组件与数据流
- **[MCP 工具 API 参考](api-reference.md)** - 完整工具文档与示例
- **[开发者工作流指南](developer-guide.md)** - 分步开发工作流
- **[上下文管理](context-management.md)** - 上下文切换与缓存机制
- **[文件结构](file-structure.md)** - 项目组织与目录结构
- **[仪表板系统](dashboard.md)** - Web 仪表板与实时特性
- **[故障排除与 FAQ](troubleshooting.md)** - 常见问题与解决方案

### 快速开始
- **[开发环境搭建](setup.md)** - 快速上手
- **[贡献指南](contributing.md)** - 如何参与贡献
- **[测试指南](testing.md)** - 运行测试与新增测试

## 🚀 快速上手

### AI 助手集成
```json
{
  "mcpServers": {
    "spec-workflow": {
      "command": "npx",
      "args": ["-y", "@pimzino/spec-workflow-mcp@latest", "/path/to/project", "--AutoStartDashboard"]
    }
  }
}
```

### 本地开发
```bash
# 克隆与安装
git clone <repository-url>
cd spec-workflow-mcp
npm install

# 启动开发服务器
npm run dev

# 生产构建  
npm run build
```

## 🔍 能力分析总览

### 关键问题解答

基于对代码库的全面分析，以下是若干关键技术问题的确定性回答：

#### 问题 1：网页抓取与研究能力？
**答案：无独立网页抓取——依赖 LLM 的内置 Web 搜索**

| 方面 | 本 MCP | 其他 AI 代理 | 扩展机会 |
|--------|----------|----------------|---------------------|
| **网页抓取** | ❌ 无独立能力 | ✅ 自定义抓取（Puppeteer/Playwright） | 🔮 可增添结构化抓取工具 |
| **API 研究** | ❌ 依赖 LLM Web 搜索 | ✅ 直连 API | 🔮 可加 GitHub、Stack Overflow API |
| **研究缓存** | ❌ 无持久化 | ✅ 高级缓存 | 🔮 可缓存 LLM 研究结果 |
| **数据来源** | ✅ LLM 训练数据 + 实时 Web | ❌ 受限配置来源 | ✅ 结合两者优势 |

#### 问题 2：AI 调用与上下文窗管理？
**答案：纯 MCP——仅使用连接的 LLM，无独立 AI 调用**

| 方面 | 本 MCP | 其他 AI 代理 | 扩展机会 |
|--------|----------|----------------|---------------------|
| **AI 服务调用** | ❌ 无独立 AI 调用 | ✅ 多模型集成 | 🔮 可增专用 AI 服务 |
| **上下文管理** | ❌ 不操纵 LLM 窗口 | ✅ 高级上下文策略 | 🔮 可加上下文优化 |
| **记忆管理** | ❌ 仅文件式 | ✅ 向量库/嵌入 | 🔮 可加持久化记忆 |
| **多模型** | ❌ 单 LLM | ✅ GPT-4 + Claude + Gemini | 🔮 可加模型路由 |

#### 问题 3：文档规划流程？
**答案：模板引导的 LLM 智能——无另行 AI 规划**

| 方面 | 本 MCP | 其他 AI 代理 | 扩展机会 |
|--------|----------|----------------|---------------------|
| **规划智能** | ✅ LLM 推理配合模板 | ✅ 专用规划 AI | 🔮 可加自适应工作流 |
| **模板系统** | ✅ 静态而全面 | ❌ 常无结构化模板 | ✅ 结构化优势 |
| **工作流适配** | ❌ 固定顺序 | ✅ 动态工作流生成 | 🔮 可加 LLM 驱动工作流 |
| **项目分析** | ✅ LLM 分析项目上下文 | ✅ 专项分析工具 | 🔮 可加深度代码分析 |

#### 问题 4：自动审查流程？
**答案：仅人工审批——无自动化 AI 审核**

| 方面 | 本 MCP | 其他 AI 代理 | 扩展机会 |
|--------|----------|----------------|---------------------|
| **审查自动化** | ❌ 需人工审批 | ✅ 多阶段 AI 审核 | 🔮 可加可选 AI 关卡 |
| **质量保证** | ✅ LLM 质量 + 人工把关 | ❌ 纯 AI 易出错 | ✅ 最佳质量控制 |
| **审批工作流** | ✅ 仪表板/VS Code 集成 | ❌ 多为 CLI | ✅ 更佳用户体验 |
| **审查智能** | ✅ LLM 可给改进建议 | ✅ 专用审核模型 | 🔮 可加审核模板 |

#### 问题 5：最佳实践标准？
**答案：依赖 LLM 内置知识——不从外部拉取标准**

| 方面 | 本 MCP | 其他 AI 代理 | 扩展机会 |
|--------|----------|----------------|---------------------|
| **标准来源** | ✅ LLM 广泛训练知识 | ✅ 外部标准 API | 🔮 可加标准集成 |
| **时效性** | ✅ LLM 可 Web 搜索获取最新 | ❌ 静态配置 | ✅ 始终保持新鲜 |
| **定制化** | ❌ 无项目特定标准 | ✅ 自定义规则引擎 | 🔮 可加组织级标准 |
| **最佳实践** | ✅ LLM 提供行业通用最佳实践 | ❌ 受限于预配置 | ✅ 覆盖更全面 |

## ⚠️ 技术限制与能力

概要：不做独立外部调用、不操控 LLM 上下文、审批仅人工；擅长模板化工作流、上下文组织与人机协作。详情见各专题。

---

## 🎯 关键概念

### MCP 工具
服务器提供 12 个 MCP 工具以支持规范驱动开发：
- **工作流**: `spec-workflow-guide`, `steering-guide`
- **内容**: `create-spec-doc`, `create-steering-doc`, `get-template-context`
- **搜索**: `get-spec-context`, `get-steering-context`, `spec-list`
- **状态**: `spec-status`, `manage-tasks`
- **审批**: `request-approval`, `get-approval-status`, `delete-approval`

### 文件组织
```
.spec-workflow/
├── specs/           # 规范文档
├── steering/        # 项目指导文档
├── approvals/       # 审批工作流数据
└── session.json     # 活跃会话
```

### 工作流阶段
1. **需求** → 2. **设计** → 3. **任务** → 4. **实现**（每阶段需审批）

---

## 📚 文档规范
- **代码示例**：尽量提供可运行示例
- **错误处理**：标明可能的错误情形
- **性能**：注明关键性能注意点
- **安全**：强调安全影响
- **破坏性变更**：清晰标注

## 🤝 获取帮助
1. 先看 [故障排除指南](troubleshooting.md)
2. 搜索 [GitHub Issues](https://github.com/Pimzino/spec-workflow-mcp/issues)
3. 提交带复现步骤的新 Issue
4. 加入社区渠道获取实时支持

---

## 📊 技术架构摘要

纯 MCP 设计，利用连接 LLM 的内建能力；模板 + 人工审批；本地 `.spec-workflow/` 管理上下文与状态；推荐 50-100 个规范规模；本地安全、无外传数据。
